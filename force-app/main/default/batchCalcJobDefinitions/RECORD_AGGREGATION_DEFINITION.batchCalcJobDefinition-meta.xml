<?xml version="1.0" encoding="UTF-8"?>
<BatchCalcJobDefinition xmlns="http://soap.sforce.com/2006/04/metadata">
    <dataSpaceApiName>default</dataSpaceApiName>
    <datasources>
        <fields>
            <alias>Task_WhoId</alias>
            <dataType>Text</dataType>
            <isPrimaryKey>false</isPrimaryKey>
            <name>WhoId</name>
        </fields>
        <fields>
            <alias>Task_Id</alias>
            <dataType>Text</dataType>
            <isPrimaryKey>false</isPrimaryKey>
            <name>Id</name>
        </fields>
        <label>Task</label>
        <name>Task</name>
        <sourceName>Task</sourceName>
        <type>StandardObject</type>
    </datasources>
    <datasources>
        <fields>
            <alias>AccountContactRelation_AccountId</alias>
            <dataType>Text</dataType>
            <isPrimaryKey>false</isPrimaryKey>
            <name>AccountId</name>
        </fields>
        <fields>
            <alias>AccountContactRelation_ContactId</alias>
            <dataType>Text</dataType>
            <isPrimaryKey>false</isPrimaryKey>
            <name>ContactId</name>
        </fields>
        <label>AccountContactRelation</label>
        <name>AccountContactRelation</name>
        <sourceName>AccountContactRelation</sourceName>
        <type>StandardObject</type>
    </datasources>
    <datasources>
        <fields>
            <alias>PartyRelationshipGroup_AccountId</alias>
            <dataType>Text</dataType>
            <isPrimaryKey>false</isPrimaryKey>
            <name>AccountId</name>
        </fields>
        <fields>
            <alias>PartyRelationshipGroup_Id</alias>
            <dataType>Text</dataType>
            <isPrimaryKey>false</isPrimaryKey>
            <name>Id</name>
        </fields>
        <label>PartyRelationshipGroup</label>
        <name>PartyRelationshipGroup</name>
        <sourceName>PartyRelationshipGroup</sourceName>
        <type>StandardObject</type>
    </datasources>
    <datasources>
        <fields>
            <alias>RecordAggregationResult_AggregateToRecord_Id</alias>
            <dataType>Text</dataType>
            <isPrimaryKey>false</isPrimaryKey>
            <name>AggregateToRecordId</name>
        </fields>
        <fields>
            <alias>RecordAggregationResult_AggregateFromRecord_Id</alias>
            <dataType>Text</dataType>
            <isPrimaryKey>false</isPrimaryKey>
            <name>AggregateFromRecordId</name>
        </fields>
        <fields>
            <alias>RecordAggregationResult_RecordAggregationDefinition_Id</alias>
            <dataType>Text</dataType>
            <isPrimaryKey>false</isPrimaryKey>
            <name>RecordAggregationDefinitionId</name>
        </fields>
        <fields>
            <alias>RecordAggregationResult_Id</alias>
            <dataType>Text</dataType>
            <isPrimaryKey>false</isPrimaryKey>
            <name>Id</name>
        </fields>
        <label>RecordAggregationResult</label>
        <name>RecordAggregationResult</name>
        <sourceName>RecordAggregationResult</sourceName>
        <type>StandardObject</type>
    </datasources>
    <definitionRunMode>Batch</definitionRunMode>
    <executionPlatformType>CRMA</executionPlatformType>
    <filters>
        <criteria>
            <operator>Equals</operator>
            <sequence>1</sequence>
            <sourceFieldName>IsStaleRecord</sourceFieldName>
            <value>N</value>
        </criteria>
        <filterCondition>1</filterCondition>
        <isDynamicFilter>false</isDynamicFilter>
        <label>Active Records Filter</label>
        <name>Active_Records_Filter</name>
        <sourceName>Identify_Stale_Data</sourceName>
    </filters>
    <filters>
        <criteria>
            <operator>Equals</operator>
            <sequence>1</sequence>
            <sourceFieldName>IsStaleRecord</sourceFieldName>
            <value>Y</value>
        </criteria>
        <filterCondition>1</filterCondition>
        <isDynamicFilter>false</isDynamicFilter>
        <label>Stale Records Filter</label>
        <name>Stale_Records_Filter</name>
        <sourceName>Identify_Stale_Data</sourceName>
    </filters>
    <isTemplate>false</isTemplate>
    <joins>
        <fields>
            <alias>AccountContactRelation_ContactId</alias>
            <sourceFieldName>AccountContactRelation_ContactId</sourceFieldName>
            <sourceName>AccountContactRelation</sourceName>
        </fields>
        <fields>
            <alias>sourceId</alias>
            <sourceFieldName>PartyRelationshipGroup_Id</sourceFieldName>
            <sourceName>PartyRelationshipGroup</sourceName>
        </fields>
        <joinKeys>
            <primarySourceFieldName>PartyRelationshipGroup_AccountId</primarySourceFieldName>
            <secondarySourceFieldName>AccountContactRelation_AccountId</secondarySourceFieldName>
        </joinKeys>
        <label>RA0wK_07k_j1</label>
        <name>RA0wK_07k_j1</name>
        <primarySourceName>PartyRelationshipGroup</primarySourceName>
        <secondarySourceName>AccountContactRelation</secondarySourceName>
        <type>Inner</type>
    </joins>
    <joins>
        <fields>
            <alias>sourceId</alias>
            <sourceFieldName>sourceId</sourceFieldName>
            <sourceName>RA0wK_07k_j1</sourceName>
        </fields>
        <fields>
            <alias>targetId</alias>
            <sourceFieldName>Task_Id</sourceFieldName>
            <sourceName>Task</sourceName>
        </fields>
        <joinKeys>
            <primarySourceFieldName>AccountContactRelation_ContactId</primarySourceFieldName>
            <secondarySourceFieldName>Task_WhoId</secondarySourceFieldName>
        </joinKeys>
        <label>RA0wK_07k_j1_00T_j2</label>
        <name>RA0wK_07k_j1_00T_j2</name>
        <primarySourceName>RA0wK_07k_j1</primarySourceName>
        <secondarySourceName>Task</secondarySourceName>
        <type>Inner</type>
    </joins>
    <joins>
        <fields>
            <alias>ConfigId</alias>
            <sourceFieldName>ConfigId</sourceFieldName>
            <sourceName>RA0wK_07k_j1_00T_j2_fr</sourceName>
        </fields>
        <fields>
            <alias>Id</alias>
            <sourceFieldName>RecordAggregationResult_Id</sourceFieldName>
            <sourceName>RecordAggregationResult</sourceName>
        </fields>
        <fields>
            <alias>sourceId</alias>
            <sourceFieldName>sourceId</sourceFieldName>
            <sourceName>RA0wK_07k_j1_00T_j2_fr</sourceName>
        </fields>
        <fields>
            <alias>targetId</alias>
            <sourceFieldName>targetId</sourceFieldName>
            <sourceName>RA0wK_07k_j1_00T_j2_fr</sourceName>
        </fields>
        <joinKeys>
            <primarySourceFieldName>sourceId</primarySourceFieldName>
            <secondarySourceFieldName>RecordAggregationResult_AggregateToRecord_Id</secondarySourceFieldName>
        </joinKeys>
        <joinKeys>
            <primarySourceFieldName>targetId</primarySourceFieldName>
            <secondarySourceFieldName>RecordAggregationResult_AggregateFromRecord_Id</secondarySourceFieldName>
        </joinKeys>
        <joinKeys>
            <primarySourceFieldName>ConfigId</primarySourceFieldName>
            <secondarySourceFieldName>RecordAggregationResult_RecordAggregationDefinition_Id</secondarySourceFieldName>
        </joinKeys>
        <label>AggregateResultJoin</label>
        <name>AggregateResultJoin</name>
        <primarySourceName>RA0wK_07k_j1_00T_j2_fr</primarySourceName>
        <secondarySourceName>RecordAggregationResult</secondarySourceName>
        <type>Outer</type>
    </joins>
    <label>RECORD_AGGREGATION_DEFINITION</label>
    <processType>RecordAggregation</processType>
    <status>Active</status>
    <transforms>
        <expressionFields>
            <alias>ConfigId</alias>
            <dataType>Text</dataType>
            <expression>&quot;16yWs0000003TzxIAE&quot;</expression>
            <length>255</length>
        </expressionFields>
        <label>RA0wK_07k_j1_00T_j2_fr</label>
        <name>RA0wK_07k_j1_00T_j2_fr</name>
        <sourceName>RA0wK_07k_j1_00T_j2</sourceName>
        <transformationType>Expression</transformationType>
    </transforms>
    <transforms>
        <expressionFields>
            <alias>IsStaleRecord</alias>
            <dataType>Text</dataType>
            <expression>IF(ISNULL({ConfigId}), IF(ISNULL({sourceId}) , IF(ISNULL({targetId}) , &quot;Y&quot;, &quot;N&quot;) , &quot;N&quot;)  , &quot;N&quot;)</expression>
            <length>1</length>
        </expressionFields>
        <label>Identify_Stale_Data</label>
        <name>Identify_Stale_Data</name>
        <sourceName>AggregateResultJoin</sourceName>
        <transformationType>Expression</transformationType>
    </transforms>
    <writebacks>
        <canWrtbckToNonEditableFields>false</canWrtbckToNonEditableFields>
        <fields>
            <isAutogenerated>false</isAutogenerated>
            <runtimeParameter>false</runtimeParameter>
            <sourceFieldName>sourceId</sourceFieldName>
            <targetFieldName>AggregateToRecordId</targetFieldName>
        </fields>
        <fields>
            <isAutogenerated>false</isAutogenerated>
            <runtimeParameter>false</runtimeParameter>
            <sourceFieldName>targetId</sourceFieldName>
            <targetFieldName>AggregateFromRecordId</targetFieldName>
        </fields>
        <fields>
            <isAutogenerated>false</isAutogenerated>
            <runtimeParameter>false</runtimeParameter>
            <sourceFieldName>ConfigId</sourceFieldName>
            <targetFieldName>RecordAggregationDefinitionId</targetFieldName>
        </fields>
        <fields>
            <isAutogenerated>false</isAutogenerated>
            <runtimeParameter>false</runtimeParameter>
            <sourceFieldName>Id</sourceFieldName>
            <targetFieldName>Id</targetFieldName>
        </fields>
        <isChangedRow>true</isChangedRow>
        <isExistingDataset>false</isExistingDataset>
        <label>ValidData Upsert writeback</label>
        <name>ValidData_Upsert_writeback</name>
        <operationType>Upsert</operationType>
        <sourceName>Active_Records_Filter</sourceName>
        <storageType>sObject</storageType>
        <targetObjectName>RecordAggregationResult</targetObjectName>
        <writebackSequence>1</writebackSequence>
        <writebackUser>005WV000003ghutYAA</writebackUser>
    </writebacks>
    <writebacks>
        <canWrtbckToNonEditableFields>false</canWrtbckToNonEditableFields>
        <fields>
            <isAutogenerated>false</isAutogenerated>
            <runtimeParameter>false</runtimeParameter>
            <sourceFieldName>Id</sourceFieldName>
            <targetFieldName>Id</targetFieldName>
        </fields>
        <isChangedRow>false</isChangedRow>
        <isExistingDataset>false</isExistingDataset>
        <label>StaleData Delete Writeback</label>
        <name>StaleData_Delete_Writeback</name>
        <operationType>Delete</operationType>
        <sourceName>Stale_Records_Filter</sourceName>
        <storageType>sObject</storageType>
        <targetObjectName>RecordAggregationResult</targetObjectName>
        <writebackSequence>2</writebackSequence>
        <writebackUser>005WV000003ghutYAA</writebackUser>
    </writebacks>
</BatchCalcJobDefinition>
